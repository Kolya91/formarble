<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <title>Formarble example</title>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css"/>
    <script src="bower_components/lodash/dist/lodash.js"></script>
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="../../formarble.js"></script>
    <script src="../../formarble.controls.js"></script>
    <script src="schema.js"></script>
    <script src="app.js"></script>

    <style>
        .nav-tabs li > a {
            max-width: 200px;
            text-overflow: ellipsis;
            white-space: nowrap;
            overflow: hidden;
        }

        [fm-tree-sidebar] > li.selected > a {
            font-weight: bold;
        }

        [fm-tree-sidebar] > li.open > a {
            font-style: italic;
        }
    </style>
</head>
<body ng-app="FormarbleExample">
<div class="container">
    <h1>Profile example</h1>

    <div>
        <form class="form-horizontal" fm-form="schema" fm-theme="bs" ng-model="model">
            <div fm-control="$control"></div>
        </form>
    </div>

    <div class="row">
        <div class="col-md-6">
            Model:
            <pre>{{model | json}}</pre>
        </div>
        <div class="col-md-6">
            Model (filtered):
            <pre>{{modelFiltered | json}}</pre>
        </div>
    </div>
</div>
</body>

<script id="bs/tree" type="text/ng-template">
    <h3 class="text-muted" ng-if="::!$isSubtree">
        <a href ng-click="$tree.select()">{{::$control.title}}</a>
    </h3>
    <div class="row">
        <div class="col-lg-3" ng-if="::!$isSubtree">
            <ol fm-tree-sidebar="$control"></ol>
        </div>
        <div ng-class=":: {'col-lg-12': $isSubtree, 'col-lg-9': !$isSubtree}">
            <div ng-if="!$tree.selected && $subControls.length">
                <div ng-repeat="c in ::$subControls" fm-control="c"></div>
            </div>
            <div ng-if="!$tree.selected && !$subControls.length">
                <h3 class="text-muted">Select option in tree</h3>
            </div>
            <div ng-if="$tree.selected">
                <div fm-control="$tree.selected"></div>
            </div>
        </div>
    </div>
</script>
<script id="bs/tree/sidebar" type="text/ng-template">
    <li ng-repeat="i in $items" ng-class="{selected: $tree.isSelected(i), open: $tree.isOpen(i)}">
        <a href ng-click="$select(i)">{{i.title}}</a>
        <ul ng-if="$tree.isOpen(i)" fm-tree-sidebar="i"></ul>
    </li>
</script>
<script id="bs/group" type="text/ng-template">
    <div>
        <p class="text-muted">{{::$control.title}}</p>

        <div ng-repeat="c in ::$subControls" fm-control="c"></div>
    </div>
</script>

<script id="bs/group/items" type="text/ng-template">
    <p class="text-muted">{{::$control.title}}</p>

    <ul class="nav nav-tabs">
        <li><a href ng-click="$group.addItem()"><i class="glyphicon glyphicon-plus"></i></a></li>
        <li ng-class="{active: c.$selected}" ng-repeat="c in $group.$items">
            <a href ng-click="$group.select(c)">{{$group.getLabel(c)}}</a>
        </li>
        <li class="pull-right">
            <a href ng-click="$group.removeItem($group.selected)"><i class="glyphicon glyphicon-minus"></i></a>
        </li>
    </ul>
    <div ng-if="!$group.selected">
        <h3 class="text-center text-muted">Create or select an item first</h3>
    </div>
    <div fm-control="$group.selected">
    </div>
</script>
<!--
<script id="bs/group:tab" type="text/ng-template">
    &lt;!&ndash; Nav tabs &ndash;&gt;
    <ul class="nav nav-pills">
        <li ng-class="{active: $first}"
            ng-repeat="c in ::$subControls">
            <a href="#{{::c.path.split('.').join('-')}}" data-toggle="tab">{{::c.title || c.description || c.path}}</a>
        </li>
    </ul>
    &lt;!&ndash; Tab panes &ndash;&gt;
    <div class="tab-content">
        <div class="tab-pane"
             ng-class="{active: $first}"
             ng-repeat="c in ::$subControls"
             id="{{::c.path.split('.').join('-')}}"
             fm-control="c"></div>
    </div>
</script>-->

<script id="bs/control-label" type="text/ng-template">
    {{:: $control.title}}
    <a class="control-help" ng-if="::$control.display.hint" title="{{::$control.display.hint}}">
        <i class="glyphicon glyphicon-info-sign"></i>
    </a>
</script>
<script id="bs/control-empty-hint" type="text/ng-template">
    <p class="form-control-static text-muted">
        <a href="" title="Click to change" ng-click="$setRecommended()">{{$control.defaultHint || 'System default'}}</a>
    </p>
</script>
<script id="bs/input" type="text/ng-template">
    <div class="form-group" ng-class="{'has-error': $input.$dirty && $input.$invalid}">
        <label class="control-label col-sm-4" fm-control-label></label>

        <div class="col-sm-8" ng-if="$empty" ng-include="'bs/control-empty-hint'"></div>
        <div class="col-sm-8" ng-if="!$empty">
            <input class="form-control" fm-control-input/>

            <p class="help-block pull-right">
                <a href ng-click="$setEmpty()">use default</a>
            </p>

            <p ng-if="$control.description" class="help-block">{{$control.description}}</p>
        </div>
    </div>
</script>
<script id="bs/input/range" type="text/ng-template">
    <div class="form-group" ng-class="{'has-error': $input.$invalid}">
        <label class="control-label col-sm-4" fm-control-label></label>

        <div class="col-sm-8" ng-if="$empty" ng-include="'bs/control-empty-hint'"></div>
        <div class="col-sm-8" ng-if="!$empty">
            <div class="input-group">
                <input class="form-control" type="range" fm-control-input/>
                <span class="input-group-addon" style="min-width: 60px">{{$empty ? 'Auto' : $value}}</span>
            </div>
            <p class="help-block pull-right">
                <a href ng-click="$setEmpty()">use default</a>
            </p>

            <p ng-if="$control.description" class="help-block">{{$control.description}}</p>
        </div>
    </div>
</script>
<script id="bs/checkbox" type="text/ng-template">
    <div class="form-group">
        <label class="control-label col-sm-4" fm-control-label></label>

        <div class="col-sm-8" ng-if="$empty" ng-include="'bs/control-empty-hint'"></div>
        <div class="col-sm-8" ng-if="!$empty">
            <div class="checkbox">
                <label>
                    <input type="checkbox" fm-control-input> {{$control.description}}
                </label>

                <p class="help-block pull-right">
                    <a href ng-click="$setEmpty()">use default</a>
                </p>
            </div>
        </div>
    </div>
</script>
<script id="bs/radiolist" type="text/ng-template">
    <div class="form-group">
        <label class="control-label col-sm-4" fm-control-label for=""></label>

        <div class="col-sm-8" ng-if="$empty" ng-include="'bs/control-empty-hint'"></div>
        <div class="col-sm-8" ng-if="!$empty">
            <p class="help-block pull-right">
                <a href ng-click="$setEmpty()">use default</a>
            </p>

            <div class="radio" ng-repeat="li in $control.display.options">
                <label>
                    <input type="radio" fm-control-input ng-value="li.id"/> {{li.title}}
                </label>
            </div>
        </div>
    </div>
</script>
<script id="bs/select" type="text/ng-template">
    <div class="form-group">
        <label class="control-label col-sm-4" fm-control-label></label>

        <div class="col-sm-8" ng-if="$empty" ng-include="'bs/control-empty-hint'"></div>
        <div class="col-sm-8" ng-if="!$empty">
            <select class="form-control" fm-control-input></select>

            <p class="help-block pull-right">
                <a href ng-click="$setEmpty()">use default</a>
            </p>
        </div>
    </div>
</script>
</html>
